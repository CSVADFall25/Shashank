<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Mirrored Cube â€” Duotone + Multi-Layer Contours</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Modern p5 + p5.dom -->
  <script src="https://cdn.jsdelivr.net/npm/p5@1.9.4/lib/p5.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/p5@1.9.4/lib/addons/p5.dom.min.js"></script>
  <style>
    :root { --bg:#0b0c10; --text:#e5e7eb; --muted:#9ca3af; --panel:#12151b; --border:#1f2937; }
    html, body { background:var(--bg); color:var(--text); margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; }
    .wrap { display:grid; grid-template-columns: 330px 1fr; gap:12px; padding:12px; }
    .panel { background:var(--panel); border:1px solid var(--border); border-radius:12px; padding:14px; height:fit-content; position:sticky; top:12px; }
    .panel h2 { margin:0 0 8px; font-size:16px; }
    .group { margin:12px 0; padding:10px; border:1px solid var(--border); border-radius:10px; }
    .group h3 { margin:0 0 8px; font-size:12px; color:var(--muted); text-transform:uppercase; letter-spacing:.3px; }
    .row { display:flex; align-items:center; justify-content:space-between; gap:8px; margin:8px 0; }
    label { font-size:14px; }
    input[type="range"] { width:160px; }
    .color-row { display:flex; align-items:center; gap:10px; flex-wrap:wrap; }
    canvas { border:1px solid var(--border); border-radius:12px; background:#000; }
    button { background:#0f172a; color:var(--text); border:1px solid var(--border); border-radius:10px; padding:8px 10px; cursor:pointer; }
    button:hover { border-color:#60a5fa; }
    .hint { color:var(--muted); font-size:12px; margin-top:6px; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="panel" id="controls">
      <h2>Mirrored Cube Controller</h2>

      <div class="group">
        <h3>Grid & Source</h3>
        <div class="row">
          <label>Cells per side</label>
          <input id="cubeCountSlider" type="range" min="2" max="60" value="12" />
        </div>
        <div class="row">
          <label>Per-tile transforms</label>
          <input id="transformToggle" type="checkbox" checked />
        </div>
        <div class="hint">Transforms rotate/flip alternating tiles (original mirrored-cube vibe).</div>
      </div>

      <div class="group">
        <h3>Brightness Forming</h3>
        <div class="row">
          <label>Form Strength</label>
          <input id="formStrength" type="range" min="0" max="100" value="65" />
        </div>
        <div class="hint">Push tiles toward their average brightness (screen/multiply).</div>
      </div>

      <div class="group">
        <h3>Two-Color Filter</h3>
        <div class="color-row">
          <label>Inside</label><input id="inColor" type="color" value="#ffcc33" />
          <label>Outside</label><input id="outColor" type="color" value="#3344ff" />
        </div>
        <div class="row">
          <label>Duotone Strength</label>
          <input id="duoStrength" type="range" min="0" max="100" value="50" />
        </div>
        <div class="row">
          <label>Contrast Threshold</label>
          <input id="duoThresh" type="range" min="0" max="255" value="128" />
        </div>
        <div class="row">
          <label>Filter Mix</label>
          <input id="filterMix" type="range" min="0" max="100" value="40" />
        </div>
        <div class="row">
          <label>Contour outline</label>
          <input id="contourToggle" type="checkbox" checked />
        </div>
        <div class="hint">Filter Mix blends from earlier look (0%) to full duotone (100%).</div>
      </div>

      <div class="group">
        <h3>Actions</h3>
        <div class="row">
          <button id="saveBtn">Save PNG (S)</button>
          <span class="hint">Press T to toggle transforms</span>
        </div>
      </div>
    </div>

    <div id="sketch-holder"></div>
  </div>

  <script src="sketch.js"></script>
</body>
</html>
